I decorate code simulation with additions to populate the historic memory during execution. To do this, I hook into different simulation capabilities that might cause any side-effects and record the prior state of the affected slots in the memory before applying the change. Side effects include changes to the state (instance variables, fields) of an object and changes to the state of the context itself (e.g., caused by advancing the PC, popping a variable from the stack, or terminating the context).